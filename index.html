<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5 Star Friends</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">

    <!-- ══════════════════════════════
         LOGIN / FIRST PAGE
    ══════════════════════════════ -->
    <div id="loginScreen" class="login-screen">
        <img src="assets/backgroundforfirstpage.png" class="lp-bg" alt="">
        <div class="lp-card">
            <img src="assets/bubbleforfirstpage.png" class="lp-bubble-bg" alt="">
            <div class="lp-inner">
                <img src="assets/logo2.png" class="lp-logo" alt="5 Star Friends">
                <img src="assets/people.png" class="lp-people" alt="People">
                <input
                    type="text"
                    id="usernameInput"
                    placeholder="type your username"
                    class="lp-input"
                    onkeydown="if(event.key==='Enter')login()"
                >
                <button onclick="login()" class="lp-arrow-btn">
                    <img src="assets/Submit_Arrow.png" class="lp-arrow-img" alt="Go">
                </button>
            </div>
        </div>
    </div>

    <!-- ══════════════════════════════
         MAIN APP
    ══════════════════════════════ -->
    <div id="mainApp" style="display:none;">

        <!-- TOP HEADER -->
        <div class="top-header" id="topHeader">
            <img src="assets/topbubbleforallpages.png" class="top-header-bg" alt="">
            <div class="top-header-inner">
                <div class="top-page-icon">
                    <img src="assets/home.png" id="topPageIcon" alt="">
                </div>
                <span class="top-page-title" id="topPageTitle"></span>
            </div>
        </div>

        <!-- ─── HOME PAGE ─── -->
        <div id="homePage" class="page active page-home">
            <!-- Frosted glass card — sits over the #mainApp background image -->
            <div class="home-card">
                <div class="home-card-inner">
                    <!-- Logo top-left -->
                    <div class="home-logo-wrap">
                        <img src="assets/logo2.png" class="home-logo" alt="5 Star Friends">
                    </div>
                    <!-- Person bubble centred -->
                    <div class="home-person-wrap">
                        <div class="home-person-bubble">
                            <img src="assets/PersonIcon.png" class="home-person-img" alt="User">
                        </div>
                        <p class="home-welcome-text" id="homeWelcomeText">Welcome back user</p>
                        <p class="home-welcome-sub">What would you like to do today?</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ─── PUBLIC FEED ─── -->
        <div id="publicPage" class="page page-public">
            <div class="feed-scroll-wrap">
                <div class="feed-main-card">
                    <!-- Globe icon floats above card -->
                    <div class="feed-icon-wrap">
                        <img src="assets/publicfeedicon.png" class="feed-icon-img" alt="">
                    </div>
                    <h2 class="feed-page-title">Public Feed</h2>
                    <!-- Filter pills -->
                    <div class="filter-row">
                        <button class="filter-btn f-active" id="fAll"      onclick="filterFeed('all',event)">
                            <img src="assets/All.png" class="filter-pill-img" alt="">
                            <span class="filter-pill-label">All</span>
                        </button>
                        <button class="filter-btn"          id="fGiven"    onclick="filterFeed('given',event)">
                            <img src="assets/Given.png" class="filter-pill-img" alt="">
                            <span class="filter-pill-label">Given</span>
                        </button>
                        <button class="filter-btn"          id="fReceived" onclick="filterFeed('received',event)">
                            <img src="assets/recieved.png" class="filter-pill-img" alt="">
                            <span class="filter-pill-label">Received</span>
                        </button>
                    </div>
                    <!-- Feed list — color changes with filter -->
                    <div id="publicFeedContent" class="feed-list feed-list-all"></div>
                </div>
            </div>
        </div>

        <!-- ─── GIVE & RECEIVE PAGE ─── -->
        <div id="giveReceivePage" class="page page-gr">
            <div class="gr-scroll-wrap">
                <div class="gr-main-card">
                    <h2 class="gr-title">Log a Favor</h2>

                    <div class="gr-toggle-row">
                        <button id="grGivenBtn" class="gr-toggle-btn gr-given-active" onclick="selectGRType('given')">
                            <img src="assets/Given.png" class="gr-toggle-img" alt="">
                            <span class="gr-toggle-label">Given Favor</span>
                        </button>
                        <button id="grReceivedBtn" class="gr-toggle-btn gr-received-inactive" onclick="selectGRType('received')">
                            <img src="assets/recieved.png" class="gr-toggle-img" alt="">
                            <span class="gr-toggle-label">Received Favor</span>
                        </button>
                    </div>

                    <p id="grLabelText" class="gr-label">Given Favor</p>

                    <div class="gr-icon-wrap">
                        <img src="assets/giving_icon1.png" id="grFavorIcon" class="gr-icon-img" alt="">
                    </div>

                    <div class="favor-box-wrap">
                        <textarea id="grInput" class="favor-textarea border-given" placeholder="Describe the favor..."></textarea>
                    </div>

                    <p class="rate-label">Rate the favor</p>

                    <div class="rating-bar-wrap">
                        <img src="assets/ratingbar.png" class="rating-bar" alt="">
                        <div class="star-row" id="grStarRow">
                            <img src="assets/star.png" class="star filled" onclick="setGRRating(1)">
                            <img src="assets/star.png" class="star filled" onclick="setGRRating(2)">
                            <img src="assets/star.png" class="star filled" onclick="setGRRating(3)">
                            <img src="assets/star.png" class="star"        onclick="setGRRating(4)">
                            <img src="assets/star.png" class="star"        onclick="setGRRating(5)">
                        </div>
                    </div>

                    <button class="log-btn" onclick="submitFromGR()">LOG FAVOR</button>

                    <button class="rating-guide-btn" onclick="toggleHelp()">
                        <img src="assets/ratingguideicon.png" alt=""><span>Rating guide</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ─── CONNECTIONS ─── -->
        <div id="connectionsPage" class="page page-connections">
            <div class="conn-scroll-wrap">
                <!-- Big frosted card — Layeroverbubblebackground.png -->
                <div class="conn-main-card">
                    <!-- Icon floats above the card top edge -->
                    <div class="conn-icon-wrap">
                        <img src="assets/connections_icon.png" class="conn-icon-img" alt="">
                    </div>
                    <h2 class="conn-page-title">My Connections</h2>
                    <input type="text" id="friendInput" placeholder="Search for Friend"
                           class="conn-search-input" oninput="filterConnections(this.value)">
                    <!-- Purple list area with white dividers -->
                    <div id="connectionsList" class="conn-list"></div>
                </div>
            </div>
        </div>

        <!-- ─── LEADERBOARD ─── -->
        <div id="leaderboardPage" class="page page-leaderboard">
            <div class="lb-scroll-wrap">
                <div class="lb-main-card">
                    <div class="lb-icon-wrap">
                        <img src="assets/Statsicon1.png" class="lb-icon-img" alt="">
                    </div>
                    <h2 class="lb-page-title">Leaderboard</h2>
                    <div id="leaderboardContent" class="lb-list"></div>
                </div>
            </div>
        </div>

        <!-- ══ BOTTOM NAV ══ -->
        <nav class="bottom-nav">
            <img src="assets/bottombarforicons.png" class="nav-bg-img" alt="">
            <div class="nav-row">
                <div class="nav-item" id="navHome"        onclick="switchTab('home')">
                    <img src="assets/home.png" alt=""><span>Home</span>
                </div>
                <div class="nav-item" id="navPublic"      onclick="switchTab('public')">
                    <img src="assets/Public_feed.png" alt=""><span>Public Feed</span>
                </div>
                <div class="nav-item nav-center-item" id="navGR" onclick="switchTab('giveReceive')">
                    <div class="nav-center-bubble">
                        <img src="assets/giveandrecieveicon.png" alt="">
                    </div>
                    <span>Give &amp; Receive</span>
                </div>
                <div class="nav-item" id="navConnections" onclick="switchTab('connections')">
                    <img src="assets/connections.png" alt=""><span>Connections</span>
                </div>
                <div class="nav-item" id="navLeaderboard" onclick="switchTab('leaderboard')">
                    <img src="assets/Leaderboard.png" alt=""><span>Leaderboard</span>
                </div>
            </div>
        </nav>

    </div><!-- /mainApp -->

    <!-- ══ TRANSACTION MODAL ══ -->
    <div id="transactionModal" class="modal-overlay">
        <div class="modal-card">
            <button class="modal-x" onclick="closeTransactionModal()">×</button>
            <h3 id="modalTitle" class="modal-h">LOG FAVOR</h3>
            <p  id="modalFriendName" class="modal-friend"></p>
            <div class="favor-box-wrap">
                <textarea id="modalInput" class="favor-textarea border-given" placeholder="Describe the favor..."></textarea>
            </div>
            <p class="rate-label">RATE THE FAVOR</p>
            <div class="rating-bar-wrap">
                <img src="assets/ratingbar.png" class="rating-bar" alt="">
                <div class="star-row" id="modalStarRow">
                    <img src="assets/star.png" class="star filled" onclick="setModalRating(1)">
                    <img src="assets/star.png" class="star filled" onclick="setModalRating(2)">
                    <img src="assets/star.png" class="star filled" onclick="setModalRating(3)">
                    <img src="assets/star.png" class="star"        onclick="setModalRating(4)">
                    <img src="assets/star.png" class="star"        onclick="setModalRating(5)">
                </div>
            </div>
            <button class="log-btn" onclick="submitFromModal()">LOG FAVOR</button>
        </div>
    </div>

    <!-- ══ RATING GUIDE MODAL ══ -->
    <div id="helpModal" class="modal-overlay">
        <div class="modal-card">
            <button class="modal-x" onclick="toggleHelp()">×</button>
            <h3 class="modal-h">RATING GUIDE</h3>
            <div class="rubric-list">
                <div class="rubric-row">
                    <div class="rs"><img src="assets/star.png"><img src="assets/star.png"><img src="assets/star.png"><img src="assets/star.png"><img src="assets/star.png"></div>
                    <div><div class="rn">High value favor</div><div class="re">Helping friends move, covering a work shift, teaching a skill</div></div>
                </div>
                <div class="rubric-row">
                    <div class="rs"><img src="assets/star.png"><img src="assets/star.png"><img src="assets/star.png"><img src="assets/star.png"></div>
                    <div><div class="rn">Thoughtful gesture</div><div class="re">Spontaneous gift, designated driver</div></div>
                </div>
                <div class="rubric-row">
                    <div class="rs"><img src="assets/star.png"><img src="assets/star.png"><img src="assets/star.png"></div>
                    <div><div class="rn">Medium favor</div><div class="re">Holiday gift, event invitation, borrowing valuable item</div></div>
                </div>
                <div class="rubric-row">
                    <div class="rs"><img src="assets/star.png"><img src="assets/star.png"></div>
                    <div><div class="rn">Small gesture</div><div class="re">Cup of coffee, social media like, borrowing charger</div></div>
                </div>
                <div class="rubric-row">
                    <div class="rs"><img src="assets/star.png"></div>
                    <div><div class="rn">Minor favor</div><div class="re">Cup of water, holding door, compliment</div></div>
                </div>
            </div>
        </div>
    </div>

</div><!-- /container -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<script src="script.js"></script>
</body>
</html>